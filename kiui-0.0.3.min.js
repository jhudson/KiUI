/*
 * KiUI v0.0.3 (https://github.com/redaemn/KiUI)
 * 2013-10-22
 * Author: https://github.com/redaemn/KiUI/graphs/contributors
 *
 * This software is licensed under the GNU General Public License (GPL) version 3
 * http://www.gnu.org/copyleft/gpl.html
 */

(function(i,n,t){var e=i.kiui=i.kiui||{},o="Kiui",a=t.ui,s=n.extend,l=function(i){a.plugin(i,e,o)};s(i.kiui,{prefix:o,plugin:l,roles:{}})})(window,window.jQuery,window.kendo),function(i,n){n.data.binders.boolValue=n.data.Binder.extend({init:function(t,e,o){if("radio"!==t.type)return this.refresh=function(){},undefined;n.data.Binder.fn.init.call(this,t,e,o);var a=this;i(a.element).on("change",function(){a.change()})},refresh:function(){var n=this,t=this.element,e=n.bindings.boolValue.get(),o=i(t).val();o="true"===o?!0:"false"===o?!1:null,t.checked=e===o},change:function(){var n=this,t=n.element,e=i(t).val(),o=null;o="true"===e?!0:"false"===e?!1:null,this.bindings.boolValue.set(o)}})}(window.jQuery,window.kendo),function(i,n,t,e,o){var a=".kiuiNotifier",s=t.prefix,l=n.ui.Widget,r=(n.ui,i.proxy),u="kiui-notification-error",c="kiui-notification-info",d="kiui-notification-success",f="kiui-notifier",p="kiui-position-",m="kiui-notification",h="kiui-notification-icon",g="kiui-notification-close",v="kiui-notification-title",_="kiui-notification-content",k="top",w="bottom",y="right",C="left",b="-",x=k+b+C,E=k+b+y,T=w+b+C,M=w+b+y,N="show",P="hide",D="destroy",O="string",H="",j="body",A=l.extend({init:function(n,t){var o,s=this;l.fn.init.call(s,n,t),n=s.element,t=s.options,o=/^([^-]+)-(.+)$/.exec(t.position),n.addClass(f).addClass(p+o[1]).addClass(p+o[2]),i(e).on("resize"+a,r(s._setNotificationsPosition,s)),s._notifications=[]},options:{prefix:s,name:"Notifier",position:E},events:[D],_setNotificationsPosition:function(){var n=this,t=n.options.position,o=10,a=i(e).height(),s=0,l=o,r=o;i.each(n._notifications,function(i,n){var e=n.height(),u=n.width();u>s&&(s=u),i>0&&l+e>a-o&&(l=o,r+=s+o,s=0),t==E?n.setPosition({top:l,right:r}):t==x?n.setPosition({top:l,left:r}):t==M?n.setPosition({bottom:l,right:r}):t==T&&n.setPosition({bottom:l,left:r}),l+=e+o})},_notify:function(n,e){var a,s=this;n.append&&i.each(s._notifications,function(i,n){n.element.hasClass(e)&&(a=n)}),a!==o?a.addContent(n.content):(a=new t.Notification(i("<div></div>").appendTo(s.element),n),s._notifications.push(a),a.bind(D,function(){a.element.remove()}),a.bind(P,function(){s._notifications.splice(s._notifications.indexOf(a),1),s._setNotificationsPosition(),a.destroy()})),s._setNotificationsPosition(),a.show(n.autoHide)},_createNotificationOptions:function(i,n){return typeof i===O&&(i={content:i}),n==u?(i.icon===o&&(i.icon='<span class="k-icon k-i-note"></span>'),i.notificationClass=n+" k-error-colored"):n==c?(i.icon===o&&(i.icon='<span class="k-icon k-i-pencil"></span>'),i.notificationClass=n+" k-info-colored"):n==d&&(i.icon===o&&(i.icon='<span class="k-icon k-i-tick"></span>'),i.notificationClass=n+" k-success-colored"),i},error:function(i){var n=this;n._notify(n._createNotificationOptions(i,u),u)},info:function(i){var n=this;n._notify(n._createNotificationOptions(i,c),c)},success:function(i){var n=this;n._notify(n._createNotificationOptions(i,d),d)},destroy:function(){var n=this;n.element,i(e).off(a),i.each(n._notifications,function(i,n){n.destroy()}),n._notifications=[],n.trigger(D),l.fn.destroy.call(n)}}),Q=l.extend({init:function(i,n){var t=this;l.fn.init.call(t,i,n),i=t.element,n=t.options,i.addClass(m+" k-block").addClass(n.notificationClass).append(n.template).css("width",n.width).on("click"+a,"."+g,r(t.hide,t)),t._visible=!1,t.setIcon(n.icon),t.setTitle(n.title),t.addContent(n.content)},options:{prefix:s,name:"Notification",template:'<div class="'+h+'"></div>'+'<div class="'+g+'">'+'<span class="k-icon k-i-close">'+"</div>"+'<div class="'+v+'"></div>'+'<div class="'+_+'"></div>',notificationClass:"k-error-colored",icon:"",title:"",content:"",autoHide:!1,width:250,append:!1},events:[N,P,D],show:function(i){var n=this;n._visible||(n._visible=!0,n.element.fadeIn({queue:!1,complete:function(){n.trigger(N)}})),i&&setTimeout(r(n.hide,n),i)},hide:function(){var i=this;i._visible&&(i._visible=!1,i.element.fadeOut({queue:!1,complete:function(){i.trigger(P)}}))},setIcon:function(i){var n=this,t=n.element.find("."+h);t.html(i),i===H?t.hide():t.show()},setTitle:function(i){var n=this,t=n.element.find("."+v);t.html(i),i===H?t.hide():t.show()},addContent:function(i){var n=this;n.element.find("."+_).append(i)},setPosition:function(i){var n=this;n.element.css(i)},height:function(){var i=this;return i.element.outerHeight()},width:function(){var i=this;return i.element.outerWidth()},destroy:function(){var i=this,n=i.element;n.off(a),i.trigger(D),l.fn.destroy.call(i)}}),q={};t.notifier=function(n){var e,a,s;return n=n||{},s=!n.position||n.position!==E&&n.position!==x&&n.position!==M&&n.position!==T,s&&(n.position=E),e=q[n.position],e||(a=i("<div></div>").appendTo(j),e=q[n.position]=new t.Notifier(a,n),e.bind(D,function(){q[n.position]=o,e.element.remove()})),e},t.plugin(Q),t.plugin(A)}(window.jQuery,window.kendo,window.kiui,window),function(i,n){n.ui.validator.rules.kiuiDate=function(i){if(i.is("[data-kiui-date]")){var t=i.val(),e=i.data("kiui-date")||"",o=i.data("kiui-date-culture")||"";return""===t||null!==n.parseDate(t,e,o)}return!0},n.ui.validator.messages.kiuiDate="{0} is not a valid date"}(window.jQuery,window.kendo),function(i,n){n.ui.validator.rules.required=function(i){var t;return i.is("[type=radio]")?(t=i.parents('[data-role="validator"]').first(),!i.is("[required]")||t.find("[name="+i.attr("name")+"]").is(":checked")):n.ui.Validator.fn.options.rules.required(i)}}(window.jQuery,window.kendo),function(i,n,t,e){var o=".kiuiPopupMenu",a=kiui.prefix,s=kendo.ui.Widget,l=kendo.ui,r=(i.proxy,"click"),u="mouseenter",c="mouseleave",d="kiui-popup-menu",f="kiui-popup-menu-trigger",p="kiui-popup-menu-menu",m="kiui-state-open",h="kiui-position-top",g="kiui-position-left",v="open",_="close",k="select",w=s.extend({init:function(i,n){var t=this;s.fn.init.call(t,i,n),i=t.element,n=t.options,t._triggerEl=i.children().first(),t._menuEl=t._triggerEl.next("ul"),i.addClass(d),t._triggerEl.addClass(f),t._menuEl.addClass(p),t._createMenu(),t._bindMenuEvents(),t._attachTriggerHandlers()},options:{prefix:a,name:"PopupMenu",openOnHover:!1,direction:"bottom right",animation:"expand",dataSource:null,collisionDetection:!1},events:[v,_,k],_createMenu:function(){var i=this,n=i.options,t={orientation:"vertical",animation:{open:{effects:"expand"}}},e=n.direction.split(" ");"fade"===n.animation?t.animation={open:{effects:"fadeIn"}}:"none"===n.animation&&(t.animation=!1),"left"===e[1]&&(t.direction="left",i.element.addClass(g)),"top"===e[0]&&i.element.addClass(h),n.dataSource&&(t.dataSource=n.dataSource),i.menu=new l.Menu(i._menuEl,t),i._open=!1,i._automaticallyCloseMenuAttached=!1},_attachTriggerHandlers:function(){function i(i){i.preventDefault(),d.toggle()}function n(){t.clearTimeout(l),l=e}function a(){l=t.setTimeout(function(){l=e,d.element.off(u+o+" "+c+o),d.element.on(c+o,s),d.open()},200),d.element.one(c+o,n)}function s(){l=t.setTimeout(function(){l=e,d.element.off(c+o+" "+u+o),d.element.on(u+o,a),d.close()},200),d.element.one(u+o,n)}var l,d=this;d.options.openOnHover?d.element.on(u+o,a):d._triggerEl.on(r+o,i)},_bindMenuEvents:function(){var i=this;i.menu.bind("open",function(n){i.trigger("open",{item:n.item})===!0&&n.preventDefault()}),i.menu.bind("close",function(n){i.trigger("close",{item:n.item})===!0&&n.preventDefault()}),i.menu.bind("select",function(n){i.trigger("select",{item:n.item})})},toggle:function(){var i=this;i._open?i.close():i.open()},open:function(){var i=this,n="slideToggle",t=200;"fade"===i.options.animation?n="fadeToggle":"none"===i.options.animation&&(n="toggle",t=0),i._open||i.trigger(v,{item:i._triggerEl[0]})!==!1||(i._open=!0,i.element.addClass(m),i._setAutomaticClose(),i._menuEl.stop()[n](t))},_setAutomaticClose:function(){function t(i){e._triggerEl.find("*").add(e._triggerEl).is(i.target)||e.close()}var e=this;e._automaticallyCloseMenuAttached||(e._automaticallyCloseMenuAttached=!0,e._automaticallyCloseMenuFunction=t,i(n).on(r+o,t))},close:function(){var t=this,e="slideToggle",a=100;return"fade"===t.options.animation?e="fadeToggle":"none"===t.options.animation&&(e="toggle",a=0),t._open&&(t.menu.close(),setTimeout(function(){t._open&&t.trigger(_,{item:t._triggerEl[0]})===!1&&(t._open=!1,t.element.removeClass(m),t._menuEl.stop()[e](a),t._automaticallyCloseMenuAttached=!1,i(n).off(r+o,t._automaticallyCloseMenuFunction))},t.menu.options.hoverDelay+1)),t._open===!1},destroy:function(){var i=this;i._triggerEl.off(o),i.element.off(o),i.menu.destroy(),s.fn.destroy.call(i)}});kiui.plugin(w)}(window.jQuery,window.document,window);