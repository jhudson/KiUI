/*
 * KiUI v0.0.2 (https://github.com/redaemn/KiUI)
 * 2013-10-01
 * Author: https://github.com/redaemn/KiUI/graphs/contributors
 *
 * This software is licensed under the GNU General Public License (GPL) version 3
 * http://www.gnu.org/copyleft/gpl.html
 */

(function(i,n,t){var e=i.kiui=i.kiui||{},o="Kiui",s=t.ui,a=n.extend,c=function(i){s.plugin(i,e,o)};a(i.kiui,{prefix:o,plugin:c,roles:{}})})(window,window.jQuery,window.kendo),function(i,n){n.data.binders.boolValue=n.data.Binder.extend({init:function(t,e,o){if("radio"!==t.type)return this.refresh=function(){},undefined;n.data.Binder.fn.init.call(this,t,e,o);var s=this;i(s.element).on("change",function(){s.change()})},refresh:function(){var n=this,t=this.element,e=n.bindings.boolValue.get(),o=i(t).val();o="true"===o?!0:"false"===o?!1:null,t.checked=e===o},change:function(){var n=this,t=n.element,e=i(t).val(),o=null;o="true"===e?!0:"false"===e?!1:null,this.bindings.boolValue.set(o)}})}(window.jQuery,window.kendo),function(i,n,t,e,o){var s=".kiuiNotifier",a=t.prefix,c=n.ui.Widget,l=(n.ui,i.proxy),u="kiui-notification-error",r="kiui-notification-info",f="kiui-notification-success",d="kiui-notifier",p="kiui-position-",m="kiui-notification",h="kiui-notification-icon",g="kiui-notification-close",v="kiui-notification-title",_="kiui-notification-content",k="top",w="bottom",y="right",C="left",b="-",x=k+b+C,E=k+b+y,T=w+b+C,M=w+b+y,N="show",P="hide",O="destroy",H="string",A="",D="body",j=c.extend({init:function(n,t){var o,a=this;c.fn.init.call(a,n,t),n=a.element,t=a.options,o=/^([^-]+)-(.+)$/.exec(t.position),n.addClass(d).addClass(p+o[1]).addClass(p+o[2]),i(e).on("resize"+s,l(a._setNotificationsPosition,a)),a._notifications=[]},options:{prefix:a,name:"Notifier",position:E},events:[O],_setNotificationsPosition:function(){var n=this,t=n.options.position,o=10,s=i(e).height(),a=0,c=o,l=o;i.each(n._notifications,function(i,n){var e=n.height(),u=n.width();u>a&&(a=u),i>0&&c+e>s-o&&(c=o,l+=a+o,a=0),t==E?n.setPosition({top:c,right:l}):t==x?n.setPosition({top:c,left:l}):t==M?n.setPosition({bottom:c,right:l}):t==T&&n.setPosition({bottom:c,left:l}),c+=e+o})},_notify:function(n,e){var s,a=this;n.append&&i.each(a._notifications,function(i,n){n.element.hasClass(e)&&(s=n)}),s!==o?s.addContent(n.content):(s=new t.Notification(i("<div></div>").appendTo(a.element),n),a._notifications.push(s),s.bind(O,function(){s.element.remove()}),s.bind(P,function(){a._notifications.splice(a._notifications.indexOf(s),1),a._setNotificationsPosition(),s.destroy()})),a._setNotificationsPosition(),s.show(n.autoHide)},_createNotificationOptions:function(i,n){return typeof i===H&&(i={content:i}),n==u?(i.icon===o&&(i.icon='<span class="k-icon k-i-note"></span>'),i.notificationClass=n+" k-error-colored"):n==r?(i.icon===o&&(i.icon='<span class="k-icon k-i-pencil"></span>'),i.notificationClass=n+" k-info-colored"):n==f&&(i.icon===o&&(i.icon='<span class="k-icon k-i-tick"></span>'),i.notificationClass=n+" k-success-colored"),i},error:function(i){var n=this;n._notify(n._createNotificationOptions(i,u),u)},info:function(i){var n=this;n._notify(n._createNotificationOptions(i,r),r)},success:function(i){var n=this;n._notify(n._createNotificationOptions(i,f),f)},destroy:function(){var n=this;n.element,i(e).off(s),i.each(n._notifications,function(i,n){n.destroy()}),n._notifications=[],n.trigger(O),c.fn.destroy.call(n)}}),I=c.extend({init:function(i,n){var t=this;c.fn.init.call(t,i,n),i=t.element,n=t.options,i.addClass(m+" k-block").addClass(n.notificationClass).append(n.template).css("width",n.width).on("click"+s,"."+g,l(t.hide,t)),t._visible=!1,t.setIcon(n.icon),t.setTitle(n.title),t.addContent(n.content)},options:{prefix:a,name:"Notification",template:'<div class="'+h+'"></div>'+'<div class="'+g+'">'+'<span class="k-icon k-i-close">'+"</div>"+'<div class="'+v+'"></div>'+'<div class="'+_+'"></div>',notificationClass:"k-error-colored",icon:"",title:"",content:"",autoHide:!1,width:250,append:!1},events:[N,P,O],show:function(i){var n=this;n._visible||(n._visible=!0,n.element.fadeIn({queue:!1,complete:function(){n.trigger(N)}})),i&&setTimeout(l(n.hide,n),i)},hide:function(){var i=this;i._visible&&(i._visible=!1,i.element.fadeOut({queue:!1,complete:function(){i.trigger(P)}}))},setIcon:function(i){var n=this,t=n.element.find("."+h);t.html(i),i===A?t.hide():t.show()},setTitle:function(i){var n=this,t=n.element.find("."+v);t.html(i),i===A?t.hide():t.show()},addContent:function(i){var n=this;n.element.find("."+_).append(i)},setPosition:function(i){var n=this;n.element.css(i)},height:function(){var i=this;return i.element.outerHeight()},width:function(){var i=this;return i.element.outerWidth()},destroy:function(){var i=this,n=i.element;n.off(s),i.trigger(O),c.fn.destroy.call(i)}}),Q={};t.notifier=function(n){var e,s,a;return n=n||{},a=!n.position||n.position!==E&&n.position!==x&&n.position!==M&&n.position!==T,a&&(n.position=E),e=Q[n.position],e||(s=i("<div></div>").appendTo(D),e=Q[n.position]=new t.Notifier(s,n),e.bind(O,function(){Q[n.position]=o,e.element.remove()})),e},t.plugin(I),t.plugin(j)}(window.jQuery,window.kendo,window.kiui,window),function(i,n,t,e){var o=".kiuiPopupMenu",s=kiui.prefix,a=kendo.ui.Widget,c=kendo.ui,l=(i.proxy,"click"),u="mouseenter",r="mouseleave",f="kiui-popup-menu",d="kiui-popup-menu-trigger",p="kiui-popup-menu-menu",m="kiui-state-open",h="kiui-position-top",g="kiui-position-left",v="open",_="close",k="select",w=a.extend({init:function(i,n){var t=this;a.fn.init.call(t,i,n),i=t.element,n=t.options,t._triggerEl=i.children().first(),t._menuEl=t._triggerEl.next("ul"),i.addClass(f),t._triggerEl.addClass(d),t._menuEl.addClass(p),t._createMenu(),t._bindMenuEvents(),t._attachTriggerHandlers()},options:{prefix:s,name:"PopupMenu",openOnHover:!1,direction:"bottom right",animation:"expand",dataSource:null,collisionDetection:!1},events:[v,_,k],_createMenu:function(){var i=this,n=i.options,t={orientation:"vertical",animation:{open:{effects:"expand"}}},e=n.direction.split(" ");"fade"===n.animation?t.animation={open:{effects:"fadeIn"}}:"none"===n.animation&&(t.animation=!1),"left"===e[1]&&(t.direction="left",i.element.addClass(g)),"top"===e[0]&&i.element.addClass(h),n.dataSource&&(t.dataSource=n.dataSource),i.menu=new c.Menu(i._menuEl,t),i._open=!1,i._automaticallyCloseMenuAttached=!1},_attachTriggerHandlers:function(){function i(i){i.preventDefault(),f.toggle()}function n(){t.clearTimeout(c),c=e}function s(){c=t.setTimeout(function(){c=e,f.element.off(u+o+" "+r+o),f.element.on(r+o,a),f.open()},200),f.element.one(r+o,n)}function a(){c=t.setTimeout(function(){c=e,f.element.off(r+o+" "+u+o),f.element.on(u+o,s),f.close()},200),f.element.one(u+o,n)}var c,f=this;f.options.openOnHover?f.element.on(u+o,s):f._triggerEl.on(l+o,i)},_bindMenuEvents:function(){var i=this;i.menu.bind("open",function(n){i.trigger("open",{item:n.item})===!0&&n.preventDefault()}),i.menu.bind("close",function(n){i.trigger("close",{item:n.item})===!0&&n.preventDefault()}),i.menu.bind("select",function(n){i.trigger("select",{item:n.item})})},toggle:function(){var i=this;i._open?i.close():i.open()},open:function(){var i=this,n="slideToggle",t=200;"fade"===i.options.animation?n="fadeToggle":"none"===i.options.animation&&(n="toggle",t=0),i._open||i.trigger(v,{item:i._triggerEl[0]})!==!1||(i._open=!0,i.element.addClass(m),i._setAutomaticClose(),i._menuEl.stop()[n](t))},_setAutomaticClose:function(){function t(i){e._triggerEl.find("*").add(e._triggerEl).is(i.target)||e.close()}var e=this;e._automaticallyCloseMenuAttached||(e._automaticallyCloseMenuAttached=!0,e._automaticallyCloseMenuFunction=t,i(n).on(l+o,t))},close:function(){var t=this,e="slideToggle",s=100;return"fade"===t.options.animation?e="fadeToggle":"none"===t.options.animation&&(e="toggle",s=0),t._open&&(t.menu.close(),setTimeout(function(){t._open&&t.trigger(_,{item:t._triggerEl[0]})===!1&&(t._open=!1,t.element.removeClass(m),t._menuEl.stop()[e](s),t._automaticallyCloseMenuAttached=!1,i(n).off(l+o,t._automaticallyCloseMenuFunction))},t.menu.options.hoverDelay+1)),t._open===!1},destroy:function(){var i=this;i._triggerEl.off(o),i.element.off(o),i.menu.destroy(),a.fn.destroy.call(i)}});kiui.plugin(w)}(window.jQuery,window.document,window);