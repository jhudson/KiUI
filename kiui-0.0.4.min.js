/*
 * KiUI v0.0.4 (https://github.com/redaemn/KiUI)
 * 2013-11-01
 * Author: https://github.com/redaemn/KiUI/graphs/contributors
 *
 * This software is licensed under the GNU General Public License (GPL) version 3
 * http://www.gnu.org/copyleft/gpl.html
 */

(function(i,e,t){var n=i.kiui=i.kiui||{},o="Kiui",a=t.ui,s=e.extend,l=function(i){a.plugin(i,n,o)};s(i.kiui,{prefix:o,plugin:l,roles:{}})})(window,window.jQuery,window.kendo),function(i,e){e.data.binders.boolValue=e.data.Binder.extend({init:function(t,n,o){if("radio"!==t.type)return this.refresh=function(){},undefined;e.data.Binder.fn.init.call(this,t,n,o);var a=this;i(a.element).on("change",function(){a.change()})},refresh:function(){var e=this,t=this.element,n=e.bindings.boolValue.get(),o=i(t).val();o="true"===o?!0:"false"===o?!1:null,t.checked=n===o},change:function(){var e=this,t=e.element,n=i(t).val(),o=null;o="true"===n?!0:"false"===n?!1:null,this.bindings.boolValue.set(o)}})}(window.jQuery,window.kendo),function(i,e,t,n,o){var a=".kiuiNotifier",s=t.prefix,l=e.ui.Widget,r=(e.ui,i.proxy),u="kiui-notification-error",c="kiui-notification-info",d="kiui-notification-success",f="kiui-notifier",p="kiui-position-",m="kiui-notification",v="kiui-notification-icon",g="kiui-notification-close",h="kiui-notification-title",_="kiui-notification-content",k="top",w="bottom",y="right",C="left",b="-",x=k+b+C,E=k+b+y,T=w+b+C,M=w+b+y,N="show",P="hide",A="destroy",D="string",O="",j="body",F=l.extend({init:function(e,t){var o,s=this;l.fn.init.call(s,e,t),e=s.element,t=s.options,o=/^([^-]+)-(.+)$/.exec(t.position),e.addClass(f).addClass(p+o[1]).addClass(p+o[2]),i(n).on("resize"+a,r(s._setNotificationsPosition,s)),s._notifications=[]},options:{prefix:s,name:"Notifier",position:E},events:[A],_setNotificationsPosition:function(){var e=this,t=e.options.position,o=10,a=i(n).height(),s=0,l=o,r=o;i.each(e._notifications,function(i,e){var n=e.height(),u=e.width();u>s&&(s=u),i>0&&l+n>a-o&&(l=o,r+=s+o,s=0),t==E?e.setPosition({top:l,right:r}):t==x?e.setPosition({top:l,left:r}):t==M?e.setPosition({bottom:l,right:r}):t==T&&e.setPosition({bottom:l,left:r}),l+=n+o})},_notify:function(e,n){var a,s=this;e.append&&i.each(s._notifications,function(i,e){e.element.hasClass(n)&&(a=e)}),a!==o?a.addContent(e.content):(a=new t.Notification(i("<div></div>").appendTo(s.element),e),s._notifications.push(a),a.bind(A,function(){a.element.remove()}),a.bind(P,function(){s._notifications.splice(s._notifications.indexOf(a),1),s._setNotificationsPosition(),a.destroy()})),s._setNotificationsPosition(),a.show(e.autoHide)},_createNotificationOptions:function(i,e){return typeof i===D&&(i={content:i}),e==u?(i.icon===o&&(i.icon='<span class="k-icon k-i-note"></span>'),i.notificationClass=e+" k-error-colored"):e==c?(i.icon===o&&(i.icon='<span class="k-icon k-i-pencil"></span>'),i.notificationClass=e+" k-info-colored"):e==d&&(i.icon===o&&(i.icon='<span class="k-icon k-i-tick"></span>'),i.notificationClass=e+" k-success-colored"),i},error:function(i){var e=this;e._notify(e._createNotificationOptions(i,u),u)},info:function(i){var e=this;e._notify(e._createNotificationOptions(i,c),c)},success:function(i){var e=this;e._notify(e._createNotificationOptions(i,d),d)},destroy:function(){var e=this;e.element,i(n).off(a),i.each(e._notifications,function(i,e){e.destroy()}),e._notifications=[],e.trigger(A),l.fn.destroy.call(e)}}),H=l.extend({init:function(i,e){var t=this;l.fn.init.call(t,i,e),i=t.element,e=t.options,i.addClass(m+" k-block").addClass(e.notificationClass).append(e.template).css("width",e.width).on("click"+a,"."+g,r(t.hide,t)),t._visible=!1,t.setIcon(e.icon),t.setTitle(e.title),t.addContent(e.content)},options:{prefix:s,name:"Notification",template:'<div class="'+v+'"></div>'+'<div class="'+g+'">'+'<span class="k-icon k-i-close">'+"</div>"+'<div class="'+h+'"></div>'+'<div class="'+_+'"></div>',notificationClass:"k-error-colored",icon:"",title:"",content:"",autoHide:!1,width:250,append:!1},events:[N,P,A],show:function(i){var e=this;e._visible||(e._visible=!0,e.element.fadeIn({queue:!1,complete:function(){e.trigger(N)}})),i&&setTimeout(r(e.hide,e),i)},hide:function(){var i=this;i._visible&&(i._visible=!1,i.element.fadeOut({queue:!1,complete:function(){i.trigger(P)}}))},setIcon:function(i){var e=this,t=e.element.find("."+v);t.html(i),i===O?t.hide():t.show()},setTitle:function(i){var e=this,t=e.element.find("."+h);t.html(i),i===O?t.hide():t.show()},addContent:function(i){var e=this;e.element.find("."+_).append(i)},setPosition:function(i){var e=this;e.element.css(i)},height:function(){var i=this;return i.element.outerHeight()},width:function(){var i=this;return i.element.outerWidth()},destroy:function(){var i=this,e=i.element;e.off(a),i.trigger(A),l.fn.destroy.call(i)}}),Q={};t.notifier=function(e){var n,a,s;return e=e||{},s=!e.position||e.position!==E&&e.position!==x&&e.position!==M&&e.position!==T,s&&(e.position=E),n=Q[e.position],n||(a=i("<div></div>").appendTo(j),n=Q[e.position]=new t.Notifier(a,e),n.bind(A,function(){Q[e.position]=o,n.element.remove()})),n},t.plugin(H),t.plugin(F)}(window.jQuery,window.kendo,window.kiui,window),function(i,e){e.ui.validator.rules.kiuiDate=function(i){if(i.is("[data-kiui-date]")){var t=i.val(),n=i.data("kiui-date")||"",o=i.data("kiui-date-culture")||"";return""===t||null!==e.parseDate(t,n,o)}return!0},e.ui.validator.messages.kiuiDate="{0} is not a valid date"}(window.jQuery,window.kendo),function(i,e){e.ui.validator.rules.required=function(i){var t;return i.is("[type=radio]")?(t=i.parents('[data-role="validator"]').first(),!i.is("[required]")||t.find("[name="+i.attr("name")+"]").is(":checked")):e.ui.Validator.fn.options.rules.required(i)}}(window.jQuery,window.kendo),function(i,e,t,n,o,a){var s=".kiuiPopupMenu",l=t.prefix,r=e.ui.Widget,u=e.ui,c=(i.proxy,"click"),d="mouseenter",f="mouseleave",p="kiui-popup-menu",m="kiui-popup-menu-trigger",v="kiui-popup-menu-menu",g="kiui-state-open",h="kiui-position-top",_="kiui-position-left",k="open",w="close",y="select",C=r.extend({init:function(i,e){var t=this;r.fn.init.call(t,i,e),i=t.element,e=t.options,t._triggerEl=i.children().first(),t._menuEl=t._triggerEl.next("ul"),i.addClass(p),t._triggerEl.addClass(m),t._menuEl.addClass(v),t._createMenu(),t._bindMenuEvents(),t._attachTriggerHandlers()},options:{prefix:l,name:"PopupMenu",openOnHover:!1,direction:"bottom right",animation:"expand",dataSource:null,collisionDetection:!1},events:[k,w,y],_createMenu:function(){var i=this,e=i.options,t={orientation:"vertical",animation:{open:{effects:"expand"}}},n=e.direction.split(" ");"fade"===e.animation?t.animation={open:{effects:"fadeIn"}}:"none"===e.animation&&(t.animation=!1),"left"===n[1]&&(t.direction="left",i.element.addClass(_)),"top"===n[0]&&i.element.addClass(h),e.dataSource&&(t.dataSource=e.dataSource),i.menu=new u.Menu(i._menuEl,t),i._open=!1,i._automaticallyCloseMenuAttached=!1},_attachTriggerHandlers:function(){function i(i){i.preventDefault(),r.toggle()}function e(){o.clearTimeout(l),l=a}function t(){l=o.setTimeout(function(){l=a,r.element.off(d+s+" "+f+s),r.element.on(f+s,n),r.open()},200),r.element.one(f+s,e)}function n(){l=o.setTimeout(function(){l=a,r.element.off(f+s+" "+d+s),r.element.on(d+s,t),r.close()},200),r.element.one(d+s,e)}var l,r=this;r.options.openOnHover?r.element.on(d+s,t):r._triggerEl.on(c+s,i)},_bindMenuEvents:function(){var i=this;i.menu.bind("open",function(e){i.trigger("open",{item:e.item})===!0&&e.preventDefault()}),i.menu.bind("close",function(e){i.trigger("close",{item:e.item})===!0&&e.preventDefault()}),i.menu.bind("select",function(e){i.trigger("select",{item:e.item})})},toggle:function(){var i=this;i._open?i.close():i.open()},open:function(){var i=this,e="slideToggle",t=200;"fade"===i.options.animation?e="fadeToggle":"none"===i.options.animation&&(e="toggle",t=0),i._open||i.trigger(k,{item:i._triggerEl[0]})!==!1||(i._open=!0,i.element.addClass(g),i._setAutomaticClose(),i._menuEl.stop()[e](t))},_setAutomaticClose:function(){function e(i){t._triggerEl.find("*").add(t._triggerEl).is(i.target)||t.close()}var t=this;t._automaticallyCloseMenuAttached||(t._automaticallyCloseMenuAttached=!0,t._automaticallyCloseMenuFunction=e,i(n).on(c+s,e))},close:function(){var e=this,t="slideToggle",o=100;return"fade"===e.options.animation?t="fadeToggle":"none"===e.options.animation&&(t="toggle",o=0),e._open&&(e.menu.close(),setTimeout(function(){e._open&&e.trigger(w,{item:e._triggerEl[0]})===!1&&(e._open=!1,e.element.removeClass(g),e._menuEl.stop()[t](o),e._automaticallyCloseMenuAttached=!1,i(n).off(c+s,e._automaticallyCloseMenuFunction))},e.menu.options.hoverDelay+1)),e._open===!1},destroy:function(){var i=this;i._triggerEl.off(s),i.element.off(s),i.menu.destroy(),r.fn.destroy.call(i)}});t.plugin(C)}(window.jQuery,window.kendo,window.kiui,window.document,window),function(i,e,t,n){var o=".kiuiRating",a=t.prefix,s=e.ui.Widget,l=i.proxy,r="li",u="select",c="change",d="mouseover",f="mouseleave",p="click",m="kiui-rating",v="kiui-state-readonly",g=s.extend({init:function(i,e){var t=this;s.fn.init.call(t,i,e),i=t.element,e=t.options,i.addClass(m).on(d+o,r,l(t._mouseover,t)).on(f+o,l(t._mouseleave,t)).on(p+o,r,l(t._select,t)),i.find(r).addClass(e.starEmptyClass),t.value(e.value),t.readonly(e.readonly)},options:{prefix:a,name:"Rating",starEmptyClass:"kiui-rating-star-empty",starFullClass:"kiui-rating-star-full",value:null,readonly:!1},events:[d,f,u,c],value:function(i){var e=this;return i===n?e._currentValue:(e._currentValue=i,e._render(i),n)},readonly:function(i){var e=this;i===n&&(i=!0),i?e.element.addClass(v):e.element.removeClass(v),e._readonly=i},_mouseover:function(e){var t=this,n=i(e.currentTarget),o=n.data("value");t._readonly||(t._render(o),t.trigger(d,{value:o,item:n}))},_mouseleave:function(){var i=this;i._readonly||(i._render(i.value()),i.trigger(f))},_select:function(e){var t=this,n=i(e.currentTarget),o=n.data("value");t._readonly||(t.value(o),t.trigger(u,{value:o,item:n}),t.trigger(c))},_render:function(i){var e=this,t=e.options,o=e.element.find(r+'[data-value="'+i+'"]');null===i||i===n||0===o.length?e.element.find(r).removeClass(t.starFullClass).addClass(t.starEmptyClass):(o.prevAll(r).removeClass(t.starEmptyClass).addClass(t.starFullClass),o.removeClass(t.starEmptyClass).addClass(t.starFullClass),o.nextAll(r).removeClass(t.starFullClass).addClass(t.starEmptyClass))},destroy:function(){var i=this;i.element.off(o),s.fn.destroy.call(i)}});t.plugin(g)}(window.jQuery,window.kendo,window.kiui);